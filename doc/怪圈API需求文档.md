# 怪圈API需求



## eg：

###  **API 需求文档**

- **功能描述**：明确每个API的业务功能和使用场景。

- **用户角色**：API的使用者（前端用户、管理员、系统对接等）。

- 输入输出：

  - **请求 URL**：包括路径和请求方法（如GET、POST、PUT、DELETE）。

  - 请求参数：

    - | 参数名称 | 类型 | 是否必填 | 请求类型 | 说明 |
      | -------- | ---- | -------- | -------- | ---- |
      |          |      |          |          |      |

    - 示例：

      ```json
      {
        
      }
      ```

      

  - 响应数据：

    - | 参数名称 | 参数说明 | 类型 | 说明 |
      | -------- | -------- | ---- | ---- |
      |          |          |      |      |

    - 示例：

      ```json
      {
        "code": 200,
        "message": "Success",
        "data": {
          "userId": "12345",
          "username": "John",
          "roles": ["admin"]
        }
      }
      ```

  - 错误信息：

    - 常见错误码及其含义，例如：`400-参数错误`，`401-未授权`。



## 一、模型对话模块

### 1.1 对话记录

#### 1.11 对话记录列表

* **功能描述**：查询用户的对话记录以用来展示。

* **用户角色**：用户。

* 输入输出：

  - **请求 URL**：GET /model/message/list

  - 请求参数：

    - | 参数名称 | 数据类型 | 是否必填 | 请求类型 | 说明   |
      | -------- | -------- | -------- | -------- | ------ |
      | userId   | int      | true     | path     | 用户id |

    - 示例：`/model/message/list?#{userId}`。

  - 响应数据：

    - | 参数名称 | 参数说明 | 类型       | 说明                 |
      | -------- | -------- | ---------- | -------------------- |
      | id       | 编号     | int        |                      |
      | userId   | 用户id   | int        |                      |
      | title    | 会话标题 | String(50) | 会话标题由ai总结生成 |
      | aiName   | 会话模型 | String(50) |                      |

    - 示例：

      ```json
      {
        "code": 200,
        "message": "Success",
        "data": [
        	{
        		"id":"1",
        		"userId":"1",
        		"title":"java类的解释"
        	},
        	{
        		"id":"2",
        		"userId":"1",
        		"title":"猫娘扮演"
        	},
        	{
        		"id":"3",
        		"userId":"1",
        		"title":"环境生成"
        	}
        ]
      }
      ```

  - 错误信息：

    - 400:参数不正确
    - 404:找不到用户



#### 1.12 删除对话记录

- **功能描述**：删除一个或者多个会话记录。

- **用户角色**：用户。

- 输入输出：

  - **请求 URL**：DELETE `/model/message/#{ids}`。

  - 请求参数：

    - | 参数名称 | 类型  | 是否必填 | 请求类型 | 说明                 |
      | -------- | ----- | -------- | -------- | -------------------- |
      | ids      | int[] | true     | path     | model_conversation表 |

    - 示例：`/model/message/delete?#{ids}`。

  - - 响应数据：

      - | 参数名称 | 参数说明 | 类型 | 说明 |
        | -------- | -------- | ---- | ---- |
        |          |          |      |      |
        |          |          |      |      |
        |          |          |      |      |

    - 示例：

      ```json
      {
        "code": 200,
        "message": "Success",
        "data": null
      }
      ```

  - 错误信息：

    - 常见错误码及其含义，例如：`400-参数错误`，`401-未授权`。



#### 1.13 新增会话

- **功能描述**：新增一条会话。

- **用户角色**：用户。

- 输入输出：

  - **请求 URL**：POST /model/message。

  - 请求参数：

    - | 参数名称 | 类型 | 是否必填 | 请求类型 | 说明   |
      | -------- | ---- | -------- | -------- | ------ |
      | userId   | int  | true     | query    | 用户id |

    - 示例：`{"userId": "1"}`。

  - 响应数据：

    - | 参数名称 | 参数说明 | 类型 | 说明 |
      | -------- | -------- | ---- | ---- |
      |          |          |      |      |

    - 示例：

      ```json
      {
        "code": 200,
        "message": "Success",
        "data":null
      }
      ```

  - 错误信息：

    - 常见错误码及其含义，例如：`400-参数错误`，`401-未授权`。

#### 1.14 修改会话

- **功能描述**：修改一条会话。

- **用户角色**：用户。

- 输入输出：

  - **请求 URL**：PUT /model/message 。

  - 请求参数：

    - | 参数名称 | 类型       | 是否必填 | 请求类型 | 说明                    |
      | -------- | ---------- | -------- | -------- | ----------------------- |
      | id       | int        | true     | query    | 编号 model_conversation |
      | userId   | int        | false    | query    | 用户id                  |
      | title    | String(50) | false    | query    | 会话标题                |
      | aiName   | String(50) | false    | query    | 发送模型                |

    - 示例：

      ```json
      {
        "userId":"1",
         "id":"1",
         "title":"java类型有哪些",
         "aiName":"gpt-3.5-turbo"
      }
      ```

    

    ⚪响应数据

    - | 参数名称 | 参数说明 | 类型 | 说明 |
      | -------- | -------- | ---- | ---- |
      |          |          |      |      |

    - 示例：

      ```json
      {
        "code": 200,
        "message": "Success",
        "data":null
      }
      ```

  - 错误信息：

    - 常见错误码及其含义，例如：`400-参数错误`，`401-未授权`。

